# $Id:
# Description:	GNU Java Compiler.
# URL:		http://gcc.gnu.org/
# Maintainer:	Danny Rawlins, <romster@shortcircuit.net.au>
# Packager:	Aaron Marks, <nymacro at gmail dot com>
# Depends On:	tetex, texinfo

# Recommended:	
# Optional:	
# Category:	compiler, java

name=gcj
version=4.0.3
release=1
source=(ftp://ftp.gnu.org/pub/gnu/gcc/gcc-$version/gcc-{core,java,g++}-$version.tar.bz2)

build() {
	install -d build/empty
	cd build

	../gcc-$version/configure \
		--prefix=/usr \
		--enable-languages=c++,java \
		--disable-nls \
		--enable-shared \
		--enable-threads \
		--enable-version-specific-runtime-libs

	make && make prefix=$PKG/usr install

	ln -fs /usr/libexec/gcc/i686-pc-linux-gnu/$version/jc1 $PKG/usr/bin/jc1
	
	# remove files already on the system out of the port
	for i in `find $PKG | sed -e "s|$PKG|/|"`; do
		if [ -e "$i" ] && [ ! -d "$i" ] ; then
			rm $PKG/$i
		fi
	done

	chown -R root:root $PKG
}

