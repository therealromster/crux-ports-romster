# Description: Linear Algebra PACKage - F77 routines for Linear Algebra.
# URL: http://www.netlib.org/lapack/
# Maintainer: Danny Rawlins, crux at romster dot me
# Depends on: gcc-fortran cmake python

name=lapack
version=3.7.1
release=1
source=(http://www.netlib.org/$name/$name-$version.tgz)

build() {
	install -d build
	cd build

	cmake ../$name-$version \
		-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_SKIP_RPATH=ON \
		-DBUILD_SHARED_LIBS=ON \
		-DBUILD_TESTING=OFF \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCMAKE_INSTALL_LIBDIR=lib \
		-DUSE_OPTIMIZED_BLAS=ON \
		-DCMAKE_Fortran_COMPILER=gfortran \
		-DLAPACKE=ON \
		-DCBLAS=ON \
		-DBUILD_DEPRECATED=ON \
		-Wno-dev

	make
	make DESTDIR=$PKG install
}
