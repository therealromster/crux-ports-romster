# Description: A lightweight GTK archive manager.
# URL: http://xarchiver.sourceforge.net/
# Packager: Mark Rosenstand, mark at borkware dot net
# Maintainer: Danny Rawlins, crux at romster dot me
# Depends on: desktop-file-utils gtk xorg-libxdamage

# Optional: zip unzip p7zip arj lzop cpio unrar

name=xarchiver
version=0.5.3
release=2
source=(http://downloads.sourceforge.net/project/$name/$name-$version.tar.bz2
	xarchiver-0.5.3-add-mime-types.patch
	xarchiver-0.5.3-fix-double-escaping.patch
	xarchiver-0.5.3-fix-password-protected.patch
	xarchiver-0.5.3-fix-rpm-support.patch)

build() {
	cd $name-$version

	patch -p1 -i $SRC/xarchiver-0.5.3-add-mime-types.patch
	patch -p1 -i $SRC/xarchiver-0.5.3-fix-double-escaping.patch
	patch -p1 -i $SRC/xarchiver-0.5.3-fix-password-protected.patch
	patch -p1 -i $SRC/xarchiver-0.5.3-fix-rpm-support.patch

	./configure \
		--prefix=/usr \
		--libexecdir=/usr/lib/thunar \
		--disable-nls

	make
	make DESTDIR=$PKG install
	rm -r $PKG/usr/share/locale # why dosn't --disable-nls prevent these locale files?
	rm -r $PKG/usr/share/doc
}

