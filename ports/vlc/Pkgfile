# Description: The cross-platform media player and streaming server.
# URL: http://www.videolan.org/vlc/
# Maintainer: Danny Rawlins, monster dot romster at gmail dot com
# Depends on: liba52 libcdio libdvdnav libmad libmatroska librsvg libshout mpeg2dec win32-essential-codecs wxgtk

name=vlc
version=0.8.6i
release=1
source=(http://download.videolan.org/pub/videolan/$name/$version/$name-$version.tar.bz2
	libdca.patch)

build() {
	cd $name-$version
	patch -p 1 -i $SRC/libdca.patch
	#./bootstrap # requires cvs for intl
	#autoreconf

	./configure \
		--prefix=/usr \
		--enable-libtool \
		--enable-utf8 \
		--enable-dvdread \
		--enable-v4l \
		--enable-flac \
		--disable-faad \
		--enable-realrtsp \
		--enable-svg \
		--enable-theora \
		--disable-optimizations \
		--disable-rpath \
		--disable-skins2 \
		--disable-httpd \
		--disable-gnomevfs \
		--disable-gnutls \
		--disable-pth \
		--disable-oss \
		--disable-nls \
		--disable-libtar \
		--disable-snapshot \
		--disable-growl \
		--disable-dependency-tracking \
		--with-gnu-ld \
		--with-pic \
		--disable-ffmpeg
		#--with-ffmpeg-{mp3lame,faac,faad,dts,vorbis,theora,ogg}

	make
	make DESTDIR=$PKG install

	rm -r \
		$PKG/usr/share/doc \
		$PKG/usr/share/vlc/http \
		$PKG/usr/share/vlc/skins2

	rm $PKG/usr/bin/wxvlc

	rm -f $PKG/usr/share/vlc/vlc{16x16,32x32,48x48,128x128}.{png,xpm,ico}

	for res in 16 32 48 128; do
		install -m 0644 -D $SRC/$name-$version/share/vlc${res}x${res}.png \
			$PKG/usr/share/icons/hicolor/${res}x${res}/apps/vlc.png
	done


}

