# Description: An open-source Super Nintendo emulator.
# URL: http://www.zsnes.com/
# Maintainer: Simone Rota, sip at crux dot nu
# Depends on: libsdl libpng mesa3d
# Nice To Have: upx

name=zsnes
version=1.51
release=1
source=(http://dl.sourceforge.net/zsnes/zsnes${version/./}src.tar.bz2)

build() {
	cd zsnes_${version/./_}/src
	./configure --prefix=/usr
	make
	install -D -m755 zsnes $PKG/usr/bin/zsnes
	install -D -m644 linux/zsnes.1 $PKG/usr/man/man1/zsnes.1
	install -D -m644 linux/zsnes.desktop $PKG/usr/share/applications/zsnes.desktop	
	install -D -m644 icons/16x16x32.png $PKG/usr/share/icons/hicolor/16x16/apps/zsnes.png
	install -D -m644 icons/32x32x32.png $PKG/usr/share/icons/hicolor/32x32/apps/zsnes.png
	install -D -m644 icons/48x48x32.png $PKG/usr/share/icons/hicolor/48x48/apps/zsnes.png
	install -D -m644 icons/64x64x32.png $PKG/usr/share/icons/hicolor/64x64/apps/zsnes.png

	# compress binarys if upx is installed to save disk space
	if pkginfo -i |grep '^upx '; then
		(
			cd $PKG/usr/bin
			upx -9 "$(ls --color=none |xargs)"
		)
	fi
}

