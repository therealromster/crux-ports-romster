# Description: QCA aims to provide a straightforward and cross-platform crypto API, using Qt.
# URL: http://delta.affinix.com/qca/
# Maintainer: Danny Rawlins, monster dot romster at gmail dot com
# Packager: Jose V Beneyto, sepen at crux dot nu
# Depends on: qt4

name=qca
version=2.0.3
release=1
source=(http://delta.affinix.com/download/$name/2.0/$name-$version.tar.bz2
	gcc47.patch)

build() {
	cd $name-$version

	patch -p1 -i $SRC/gcc47.patch

	# note this is a shell script not automake
	./configure \
		--prefix=/usr \
		--qtdir=/usr/share/qt4 \
		--disable-tests \
		--release \
		--no-separate-debug-info

	[ "$CXX" ] || CXX=g++
	make CXX="$CXX" $MAKEFLAGS
	make INSTALL_ROOT=$PKG install
	mv $PKG/usr/share/man $PKG/usr
	rm $PKG/usr/share/qca/certs/README
}
