# $Id:
# Description: Tilt the floor to roll a ball through an obstacle course before time runs out.
# URL: http://icculus.org/neverball/
# Maintainer: Danny Rawlins, <romster@shortcircuit.net.au>
# Packager: Daniel Walpole, daniel at walpole dot id dot au
# Depends on: sdl_mixer, sdl_image, sdl_ttf

name=neverball
version=1.4.0
release=1
source=(http://0day.icculus.org/$name/$name-$version.tar.gz)

build() {
	cd $name-$version
	sed -i -e '/CONFIG_DATA/s:"\./data":"'/usr/share/neverball'":g' share/config.h
	sed -i -e "s|^CFLAGS=.*|CFLAGS= $CFLAGS -O3 -Wall -ansi $(sdl-config --cflags)|g" Makefile
	make
	install -d $PKG/usr/{bin,share/{$name,icons/$name}}
	install -m755 neverball neverputt -t $PKG/usr/bin/
	mv icon $PKG/usr/share/icons/$name/
	mv data $PKG/usr/share/$name/
	find $PKG/usr/share/ -type f | xargs chmod 644
	chown -R root:root $PKG
}

