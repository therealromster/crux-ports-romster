# Description: The util-linux-ng is a fork of the original util-linux project. The goal of the util-linux-ng is a transparent and reliable development that follows the Linux kernel and Linux distributions.
# URL: http://userweb.kernel.org/~kzak/util-linux-ng/
# Maintainer: Danny Rawlins, romster at shortcircuit dot net dot au
# Packager: Danny Rawlins, romster at shortcircuit dot net dot au
# Depends on: e2fsprogs ncurses zlib

name=util-linux-ng
version=2.13.1
release=1
source=(ftp://ftp.kernel.org/pub/linux/utils/util-linux-ng/v${version%.*}/util-linux-ng-$version.tar.bz2)

build() {
	cd util-linux-ng-$version

	./configure \
		--prefix=/usr \
		--mandir=/usr/man \
		--disable-nls \
		--disable-elvtune \
		--enable-write \
		--enable-rdev \
		--enable-raw \
		--enable-kill

	make
	make DESTDIR=$PKG install

	install -d $PKG/etc
	touch $PKG/etc/adjtime

	rm -r $PKG/usr/share

	rm \
		$PKG/usr/bin/wall \
		$PKG/sbin/{mkfs.bfs,mkfs.minix,fsck.minix} \
		$PKG/usr/man/man8/{fsck.minix,mkfs.bfs,mkfs.minix}.8 \
		$PKG/usr/man/man1/wall.1
}

