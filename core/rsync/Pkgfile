# Description: Utility for incremental file transfers over networks.
# URL: http://rsync.samba.org/
# Maintainer: Danny Rawlins, romster at shortcircuit dot net dot au
# Packager: Jürgen Daubert, juergen dot daubert at t-online dot de
# Depends on: openssh

name=rsync
version=2.6.9
release=3
source=(http://rsync.samba.org/ftp/rsync/rsync-$version.tar.gz \
	rsyncd.conf rsyncd rsync.driver \
	rsync-$version-fname-obo.diff)

build() {
	cd rsync-$version

	patch -p1 -i $SRC/rsync-$version-fname-obo.diff

	./configure \
		--prefix=/usr \
		--mandir=/usr/man \
		--with-rsh=ssh \
		--with-included-popt

	make
	make DESTDIR=$PKG install

	install -D -m 0755 $SRC/rsyncd $PKG/etc/rc.d/rsyncd
	install -D -m 0644 $SRC/rsyncd.conf $PKG/etc/rsyncd.conf
	install -D -m 0755 $SRC/rsync.driver $PKG/etc/ports/drivers/rsync
	install -d $PKG/var/log
	touch $PKG/var/log/rsyncd.log
}

