# Description: A Linux kernel packet filter control tool.
# URL: http://www.iptables.org/
# Maintainer: Danny Rawlins, romster at shortcircuit dot net dot au
# Packager: CRUX System Team, core-ports at crux dot nu

name=iptables
version=1.4.1.1
release=1
source=(ftp://ftp.netfilter.org/pub/iptables/iptables-$version.tar.bz2)
up2date="lynx -dump http://www.iptables.org/projects/iptables/downloads.html|grep bz2$|sed -e 's/.*-\(.*\)\.t.*/\1/' -e 'q'"

build() {
	cd iptables-$version

	# we do not want/need these kernel-headers included
	# in the iptables sources.
	rm include/linux/netfilter_ipv4/ip_tables.h
	rm include/linux/netfilter_ipv6/ip6_tables.h

	./configure \
		--prefix=/usr \
		--mandir=/usr/man \
		--libexecdir=/usr/lib \
		--disable-dependency-tracking \
		--enable-devel \
		--enable-libipq

	make
	make DESTDIR=$PKG install
	chmod a-x $PKG/usr/lib/xtables/*.so
}

