# Description: Command line utilities for transcoding various media formats.
# URL: http://www.transcoding.org/cgi-bin/transcode
# Maintainer: Danny Rawlins, romster at shortcircuit dot net dot au
# Packager: Martin Opel, mo at obbl-net dot de
# Depends on: ffmpeg glib imagemagick libavifile libdv libdvdread libfame mjpegtools mpeg2dec mplayer

name=transcode
version=20070429
release=1
source=(http://romster.shortcircuit.net.au/crux/source/transcode-snapshot-$version.tar.bz2 \
	http://dl.sourceforge.net/subtitleripper/subtitleripper-0.3-4.tgz)

build() {
	cd transcode

	./configure \
		--prefix=/usr \
		--disable-v4l \
		--enable-avifile \
		--enable-ogg \
		--enable-vorbis \
		--enable-libdv \
		--enable-a52 \
		--enable-libxml2 \
		--enable-mjpegtools \
		--enable-libfame \
		--enable-imagemagick \
		--enable-netstream \
		--enable-libavcodec \
		--enable-freetype2 \
		--enable-libpostproc \
		--with-libpostproc-includes=/usr/include/postproc \
		--enable-theora
			
	make
	make DESTDIR=$PKG install
	rm -r $PKG/usr/share

	# Subtitle support (Han Boetes)
	mkdir -p contrib/subrip
	cd contrib/subrip
	cp ../../../subtitleripper/* .
	sed -i 's|.*ppm.*||i' Makefile
	make clean all
	install -D srttool subtitle2pgm subtitle2vobsub $PKG/usr/bin
}

